ORG 0


MT1	EQU 30H
MT2 EQU 31H
MT3	EQU 32H
MT4 EQU 33H
MT5	EQU 34H
MT6 EQU 35H
MT7	EQU 36H
MT8 EQU 37H

BEGIN:
MOV MT1,#100
MOV MT2,#100
MOV MT3,#100
MOV MT4,#100
MOV MT5,#100
MOV MT6,#100
MOV MT7,#100
MOV MT8,#100




MOV P3,#255

MAIN:
CALL PWM8C
JMP MAIN








PWM8C:
		MOV R3,#255
		MOV P1,#255
LOOP_PWM:
		DJNZ R3,CONT0
		MOV P1,#255
		JMP EX_PWM
CONT0:
		MOV A,R3	
		CJNE A,MT1,CONT1
		CLR P1.0
CONT1:
		CJNE A,MT2,CONT2
		CLR P1.1
CONT2:
		CJNE A,MT3,CONT3
		CLR P1.2
CONT3:
		CJNE A,MT4,CONT4
		CLR P1.3
CONT4:
		CJNE A,MT5,CONT5
		CLR P1.4
CONT5:
		CJNE A,MT6,CONT6
		CLR P1.5
CONT6:
		CJNE A,MT7,CONT7
		CLR P1.6
CONT7:
		CJNE A,MT8,CONT8
		CLR P1.7
CONT8:
		JMP LOOP_PWM
EX_PWM:
		RET
		
SHIFT_L:
		MOV R7,MT1
		MOV R0,#MT2
		MOV R1,#MT1
LOOP_SHIFT_L:		
		
		MOV A,@R0
		MOV @R1,A
		INC R1
		INC R0
		CJNE R1,#MT1,LOOP_SHIFT_L
		MOV MT8,R7
		RET



SHIFT_R:
		MOV R7,MT8
		MOV R0,#MT7
		MOV R1,#MT8
LOOP_SHIFT_R:		
		
		MOV A,@R0
		MOV @R1,A
		DEC R1
		DEC R0
		CJNE R1,#MT8,LOOP_SHIFT_R
		MOV MT1,R7
		RET






DELAY:
		MOV R0,#255
L1:
		MOV R1,#255
		DJNZ R1,$
		DJNZ R0,L1
		RET




END