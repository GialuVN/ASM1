ORG 00H
JMP MAIN
ORG 000BH
LJMP NGAT
MAIN:
;THIET LAP THONG SO
		MOV IE,#82H
		MOV TMOD,#01H
;NAP DU LIEU VAO RAM		
		MOV R1,#00H
		MOV R0,#20H
LAP4:	
		MOV A,R1
		MOV DPTR,#DATA1
		MOVC A,@A+DPTR
		CJNE A,#00H,NAP1
		MOV R1,#10H
LAP5:
		MOV @R1,#00H
		INC R1
		CJNE R1,#16H,LAP5
		MOV R7,#12
		MOV 14H,#02H
		MOV 15H,#01H
		JMP DELAY1S
NAP1:
		MOV @R0,A
		INC R0
		INC R1
		JMP LAP4
;XOA DU LIEU TRONG RAM 10H DEN 15H
;TRE 1S
DELAY1S:
		MOV R2,#20
LAP1:
		MOV TL0,#LOW(-50000)
		MOV TH0,#HIGH(-50000)
		SETB TR0
LOOP:
		CALL HT
		JNB TF0,LOOP
		
NGAT:	
		CLR TR0
		DJNZ R2,LAP1
		JMP DEM
		
	RETI
;XUAT DU LIEU RA LED
HT:
		MOV R3,#0FEH
		MOV R0,#10H
LAP2:
		MOV A,@R0
		ADD A,#20H
		MOV R1,A
		MOV P1,@R1
		MOV P0,R3
		CALL DELAY
		INC R0
		MOV A,R3
		RL A
		MOV R3,A
		MOV P1,#00H
		MOV P0,#0FFH
		CJNE R3,#0BFH,LAP2
		RET
;TRE 2500 MICO GIAY
DELAY:
		MOV R4,#25
LAP3:
		MOV R5,#100
		DJNZ R5,$
		DJNZ R4,LAP3
		RET
;DEM GIO
DEM:
		INC 10H
		MOV A,10H
		CJNE A,#0AH,DELAY1S
		MOV 10H,#00H
		INC 11H
		MOV A,11H
		CJNE A,#06H,DELAY1S
		MOV 11H,#00H
		INC 12H
		MOV A,12H
		CJNE A,#0AH,DELAY1S
		MOV 12H,#00H
		INC 13H
		MOV A,13H
		CJNE A,06H,DELAY1S
		MOV 13H,#00H
		INC 14H
		MOV A,14H
		INC R7
		CJNE R7,#13H,LAP
		MOV R7,#01H
		MOV 14H,#01H
		MOV 15H,#00H
		CALL DELAY1S
LAP:
		CJNE A,#0AH,DELAY1S
		MOV 14H,#00H
		INC 15H
		CALL DELAY1S
DATA1:
	DB 3FH,06H,5BH,4FH,66H,6DH,7DH,07H,7FH,6FH,00H
	END		