ORG	0
JMP	MAIN
ORG	30H
MAIN:
MOV A,#38H
ACALL COMMAND
MOV A,#0EH
ACALL COMMAND

MOV DPTR,#POINT1
MOV R0,#11
LOOP: CLR A
MOVC A,@A+DPTR
ACALL TIME
ACALL DISPLAY
INC DPTR
DJNZ R0,LOOP

MOV A,#0C0H
ACALL COMMAND


MOV DPTR,#POINT2
MOV R1,#10
LOOP2: CLR A
MOVC A,@A+DPTR
ACALL TIME
ACALL DISPLAY
INC DPTR
DJNZ R1,LOOP2
MOV A,#2
ACALL COMMAND
MOV DPTR,#POINT3
MOV R3,#17
LOOP4: CLR A
MOVC A,@A+DPTR
ACALL TIME
ACALL DISPLAY
INC DPTR
DJNZ R3,LOOP4





TIME: MOV R2,#2
MOV	TMOD,#01
LOOP3: MOV TH0,#27H
MOV TL0,#10H
SETB TR0
JNB TF0,$
CLR TR0
CLR TF0
DJNZ R2,LOOP3
RET
WAIT: SJMP WAIT
COMMAND: ACALL DELAY
MOV 	P2,A	;Ghi lenh vao LCD
CLR		P3.0	;RS=0 cho phep xuat lenh vao LCD
CLR		P3.1	;R/W=0 cho phep ghi
SETB 	P3.2	;E=1
CLR		P3.2	;E=0
RET
DISPLAY: ACALL DELAY
MOV		P2,A	;Ghi du lieu len LCD
SETB	P3.0	;RS=1 cho phep xuat du lei len LCD
CLR		P3.1	;R/W=0 cho phep xuat du lieu len LCD
SETB 	P3.2	;E=1
CLR		P3.2	;E=0
RET
DELAY: SETB P2.7
CLR		P3.0
SETB	P3.1
BACK: CLR P3.2
SETB	P3.2
JB P2.7,BACK
RET
ORG 200
POINT1: DB 'LU MINH THI'
POINT2: DB 'DIEN TU K6'
POINT3: DB 'Lmthidt@yahoo...'
END