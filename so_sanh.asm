ORG 0
SETB P1.0
SETB P1.1
CLR P3.7

MAIN:
	MOV SCON,#0
	MOV TMOD,#02H	;CHE DO 2, 8 BIT
LOOPZ:	
	CALL ADC
	CALL SEND
	CALL DELAY
	JMP LOOPZ
	

ADC:
	MOV TL0,#-255
	SETB TR0
	setb P1.2
	JB P3.6,$
	CLR TR0
	MOV A,TL0
	CLR TF0
	clr P1.2
	RET
	
	
	
	
SEND:
	MOV SBUF,A
	JNB TI,$
	CLR TI
	SETB P3.7
	CLR P3.7
	RET
	
DELAY:
	MOV R2,#50
LOOP2:
	MOV R0,#10
LOOP:
	MOV R1,#10
	DJNZ R1,$
	DJNZ R0,LOOP
	DJNZ R2,LOOP2
	RET
	END