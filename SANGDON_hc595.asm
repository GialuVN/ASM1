SHCP BIT	P1.7
STCP BIT	P1.6
DS_	 BIT 	P1.5


ORG 00H
	CLR SHCP
	CLR STCP
	CLR DS_
MAIN:
	MOV 30H,#8
	MOV R7,#0FFH
LAP2:
	MOV A,#0FEH
	MOV R6,30H
LAP:
	PUSH ACC
	ANL A,R7
	CPL A
	CALL EXP_DATA
;	MOV P0,A
	POP ACC
	RL A
	CALL DELAY
	DJNZ R6,LAP
	DEC 30H
	MOV A,R7
	CLR C
	RRC A
	MOV R7,A
	CJNE A,#0,LAP2
	MOV 30H,#8
	MOV R7,#0FFH
LAP3:
	MOV A,#0FEH
	MOV R6,30H
LAP4:
	PUSH ACC
	ANL A,R7
	CPL A
	CALL EXP_DATA
;	MOV P0,A
	POP ACC
	RR A
	CALL DELAY
	DJNZ R6,LAP4
	DEC 30H
	MOV A,R7
	CLR C
	RLC A
	MOV R7,A
	CJNE A,#0,LAP3
	JMP MAIN
	
	
EXP_DATA:
	PUSH ACC
	PUSH 00H
	MOV R0,#8
LOOP_EXP_DATA:
	MOV C,ACC.7
	MOV DS_,C
	SETB SHCP
	CLR SHCP
	RL A
	DJNZ R0,LOOP_EXP_DATA
	SETB STCP
	CLR STCP
	POP 00H
	POP ACC
	RET
	
	
	
	
	RET
DELAY:
	MOV R0,#255
RE_DELAY:
	MOV R1,#255
	DJNZ R1,$
	DJNZ R0,RE_DELAY
	RET
	END
	
