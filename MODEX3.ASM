ORG 0
TEM DATA 30H
MAIN:
	MOV P0,#0FFH
	MOV P2,#0FFH
	MOV R7,#0FFH
	MOV TEM,#8
LAP2:
	MOV R6,TEM
	MOV A,#0FEH
LAP:
	PUSH ACC
	XRL A,R7
	CPL A
	MOV R0,#2
LOOP1:
	MOV p0,#0FFH
	MOV P2,#0FFH
	CALL DELAY50MS
	MOV p0,A
	MOV P2,A
	CALL DELAY50MS
	DJNZ R0,LOOP1
	POP ACC
	RL A
	DJNZ R6,LAP
	DEC TEM
	MOV A,R7
	CLR C
	RRC A
	MOV R7,A
	CJNE R7,#0,LAp1
	MOV R7,#0FFH
	MOV TEM,#8
LAP3:
	MOV R6,TEM
	MOV A,#0FEH
LAP1:
	PUSH ACC
	XRL A,R7
	MOV p0,A
	MOV R0,#2
LOOP21:
	MOV p0,#0FFH
	CALL DELAY50MS
	MOV p0,A
	CALL DELAY50MS
	DJNZ R0,LOOP21
	POP ACC
	RL A
	DJNZ R6,LAP1
	DEC TEM
	MOV A,R7
	CLR C
	RRC A
	MOV R7,A
	CJNE R7,#0,LAP3
	MOV p0,#0FFH
	CALL DELAY500MS
	MOV R0,#10
LOOP4:
	MOV p2,#11100111B
	MOV p0,#11100111B
	CALL DELAY100MS
	MOV p2,#11111111B
	MOV p0,#11111111B
	CALL DELAY100MS
	DJNZ R0,LOOP4
	MOV R0,#10
LOOP3:
	MOV p2,#11100111B
	MOV p0,#11100111B
	CALL DELAY50MS
	MOV p0,#11111111B
	MOV p2,#11111111B
	CALL DELAY50MS
	DJNZ R0,LOOP3
	MOV p2,#11000011B
	MOV p0,#11000011B
	CALL DELAY50MS
	MOV p2,#10000001B
	MOV p0,#10000001B
	CALL DELAY50MS
	MOV p2,#00000000B
	MOV p0,#00000000B
	CALL DELAY50MS
	MOV p2,#0FFH
	MOV p0,#0FFH
	CALL DELAY50MS
	MOV R2,#20
LOOP7:
	MOV p2,#10101010B
	MOV p0,#10101010B
	CALL DELAY50MS
	MOV p2,#11111111B
	MOV p0,#11111111B
	CALL DELAY50MS
	MOV 21,#01010101B
	MOV p0,#01010101B
	CALL DELAY50MS
	MOV p2,#11111111B
	MOV p0,#11111111B
	CALL DELAY50MS
	DJNZ R2,LOOP7
	MOV R0,#20
LOOP9:
	MOV A,#0FCH
LOOP8:
	MOV p2,A
	MOV p0,A
	RL A
	CALL DELAY50MS
	CJNE A,#0FCH,LOOP8
	DJNZ R0,LOOP9
	MOV R0,#20
LOOP10:
	MOV A,#0F8H
LOOP11:
	MOV p2,A
	MOV p0,A
	RL A
	CALL DELAY50MS
	CJNE A,#0F8H,LOOP11
	DJNZ R0,LOOP10
	MOV R0,#20
LOOP12:
	MOV A,#0F0H
LOOP13:
	MOV P2,A
	MOV p0,A
	RL A
	CALL DELAY50MS
	CJNE A,#0F0H,LOOP13
	DJNZ R0,LOOP12
	JMP MAIN
	











DELAY500MS:
	CALL DELAY200MS
	CALL DELAY200MS
	CALL DELAY100MS
	RET

DELAY200MS:
	CALL DELAY100MS
	CALL DELAY100MS
	RET
DELAY100MS:
	CALL DELAY50MS
	CALL DELAY50MS
	RET
DELAY50MS:
	MOV TMOD,#01H		;BO DINH THOI 0, CHE DO 1
	MOV TH0,#HIGH(-50000)
	MOV TL0,#LOW(-50000)
	SETB TR0
	JNB TF0,$
	CLR TF0
	CLR TR0
	RET
END